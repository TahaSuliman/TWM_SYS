@model IEnumerable<Curly_TWM.Domain.Entities.Team_Tasks>

@{
    ViewBag.Title = "ExecutePlan";
    Layout = "~/Views/Initiative_Officer/_LayoutInitiativeOfficer.cshtml";
}

<script src="~/Scripts/jquery-3.4.1.js"></script>
<!-- SweetAlert2 -->
<link href="~/Content/plugins/sweet-alert2/sweetalert2.css" rel="stylesheet" />
<script src="~/Content/plugins/sweet-alert2/sweetalert2.js"></script>

<!--begin::Content-->
<div class="content d-flex flex-column flex-column-fluid" id="kt_content">
    <!--begin::Container-->
    <div class="container-xxl" id="kt_content_container">
        <div class="d-flex flex-wrap flex-stack my-5">
            <!--begin::Controls-->
            <div class="d-flex flex-wrap my-1" data-select2-id="select2-data-123-oh5f">
                <!--begin::Select wrapper-->
                <div class="m-0" data-select2-id="select2-data-122-ckv0">

                </div>
                <!--end::Select wrapper-->
            </div>
            <!--end::Controls-->
            <!--begin::Heading-->
            <h2 class="fs-2 fw-bold my-2">
                <span class="fs-6 text-gray-400 ms-1">ادارة مهام الفريق</span><br />
                @ViewBag.InitiativeName
            </h2>
            <!--end::Heading-->

        </div>

        <div class="row gy-5 g-xl-10">
            <div class="col-xxl-7">
                <!--begin::Tables Widget 9-->
                <div class="card card-xl-stretch mb-xl-10">

                    <!--begin::Header-->
                    <div class="card-header align-items-center border-0" style="direction: rtl;">
                        <!--begin::Title-->
                        <h3 class="card-title fw-bolder text-dark fs-3">قائمة اعضاء الفريق</h3>
                        <!--end::Title-->

                    </div>
                    <!--end::Header-->
                    <!--begin::Body-->
                    <div class="card-body py-3">
                        <!--begin::Table container-->
                        <div class="table-responsive">
                            <!--begin::Table-->
                            <table class="table table-row-dashed table-row-gray-300 align-middle gs-0 gy-4" style="direction:rtl;text-align:right">
                                <!--begin::Table head-->
                                <thead>
                                    <tr class="fw-bolder text-muted">

                                        <th class="min-w-150px">عضو الفريق - المبادرة</th>

                                        <th class="min-w-100px" style="text-align:left">الخيارات</th>
                                    </tr>
                                </thead>
                                <!--end::Table head-->
                                <!--begin::Table body-->
                                <tbody>
                                    @foreach (var item in ViewBag.Team)
                                    {
                                        <tr>

                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="symbol symbol-45px me-5">
                                                        @*<img src="assets/media/avatars/150-11.jpg" alt="" />*@
                                                    </div>
                                                    <div class="d-flex justify-content-start flex-column">
                                                        <a href="#" class="text-dark fw-bolder text-hover-primary fs-6">  @item.emp_main.emp_arnm </a>
                                                        <span class="text-muted fw-bold text-muted d-block fs-7"> @item.Initiatives.InitiativeName</span>
                                                    </div>
                                                </div>
                                            </td>

                                            <td>
                                                <div class="d-flex justify-content-end flex-shrink-0">
                                                    <!--begin::Menu-->
                                                    <button type="button" class="btn btn-sm btn-icon btn-color-primary btn-active-light-primary" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end">
                                                        <!--begin::Svg Icon | path: icons/duotune/general/gen024.svg-->
                                                        <span class="svg-icon svg-icon-2">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">
                                                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                                    <rect x="5" y="5" width="5" height="5" rx="1" fill="#000000"></rect>
                                                                    <rect x="14" y="5" width="5" height="5" rx="1" fill="#000000" opacity="0.3"></rect>
                                                                    <rect x="5" y="14" width="5" height="5" rx="1" fill="#000000" opacity="0.3"></rect>
                                                                    <rect x="14" y="14" width="5" height="5" rx="1" fill="#000000" opacity="0.3"></rect>
                                                                </g>
                                                            </svg>
                                                        </span>
                                                        <!--end::Svg Icon-->
                                                    </button>
                                                    <!--begin::Menu 3-->
                                                    <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-800 menu-state-bg-light-primary fw-bold w-200px py-3" data-kt-menu="true" style="">
                                                        <!--begin::Heading-->
                                                        <div class="menu-item px-3">
                                                            <a href="@Url.Action("MemberDetails","Initiative_Officer" ,new { iId=item.Initiativeid ,TmId=item.Id} )" class="menu-link px-3">الاطلاع</a>
                                                        </div>

                                                        <div class="menu-item px-3">
                                                            <a href="@Url.Action("CreateTask","Initiative_Officer" ,new { iId=item.Initiativeid ,TmId=item.Id} )" class="menu-link px-3">اضافة مهام للعضو</a>
                                                        </div>

                                                        <div class="menu-item px-3">
                                                            <a href="#" class="menu-link px-3">متابعة الانجاز</a>
                                                        </div>

                                                        @*<div class="separator my-2"></div>

                                            <div class="menu-item px-3">
                                                <a href="@Url.Action("ExecutePlan","Initiative_Officer" )" class="menu-link px-3">ادارة مهام الفريق</a>
                                            </div>

                                            <div class="separator my-2"></div>*@


                                                    </div>
                                                    <!--end::Menu 3-->
                                                </div>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                                <!--end::Table body-->
                            </table>

                            <!--end::Table-->
                        </div>
                        <!--end::Table container-->
                    </div>

                </div>
                    <!--end::Tables Widget 9-->
                </div>
            <div class="col-xxl-5">
                <!--begin::Tables Widget 9-->
                <div class="card card-xl-stretch mb-xl-10">


                    <!--begin::Body-->
                    <div class="card-body py-3" style="direction:rtl">

                        <div class="card card-flush card-p-0 shadow-none bg-transparent mb-5">
                            <!--begin::Header-->
                            <div class="card-header align-items-center border-0">
                                <!--begin::Title-->
                                <h3 class="card-title fw-bolder text-dark fs-3">قائمة المهام</h3>
                                <!--end::Title-->

                            </div>
                            <!--end::Header-->
                            <!--begin::Body-->
                            <div class="card-body py-0">
                                @foreach (var item in Model)
                                {


                                    <div class="d-flex flex-nowrap align-items-center mb-7">
                                        <!--begin::Symbol-->
                                        <div class="symbol symbol-50px me-5">
                                            <span class="symbol-label sidebar-bg-muted">

                                                @if (item.TaskStat is null)
                                                {
                                                    <span class="svg-icon svg-icon-2x svg-icon-primary">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                            <path opacity="0.3" d="M21.25 18.525L13.05 21.825C12.35 22.125 11.65 22.125 10.95 21.825L2.75 18.525C1.75 18.125 1.75 16.725 2.75 16.325L4.04999 15.825L10.25 18.325C10.85 18.525 11.45 18.625 12.05 18.625C12.65 18.625 13.25 18.525 13.85 18.325L20.05 15.825L21.35 16.325C22.35 16.725 22.35 18.125 21.25 18.525ZM13.05 16.425L21.25 13.125C22.25 12.725 22.25 11.325 21.25 10.925L13.05 7.62502C12.35 7.32502 11.65 7.32502 10.95 7.62502L2.75 10.925C1.75 11.325 1.75 12.725 2.75 13.125L10.95 16.425C11.65 16.725 12.45 16.725 13.05 16.425Z" fill="black"></path>
                                                            <path d="M11.05 11.025L2.84998 7.725C1.84998 7.325 1.84998 5.925 2.84998 5.525L11.05 2.225C11.75 1.925 12.45 1.925 13.15 2.225L21.35 5.525C22.35 5.925 22.35 7.325 21.35 7.725L13.05 11.025C12.45 11.325 11.65 11.325 11.05 11.025Z" fill="black"></path>
                                                        </svg>
                                                    </span>
                                                }
                                                @if (item.TaskStat == "قيد التنفيذ")
                                                {
                                                    <span class="svg-icon svg-icon-2x svg-icon-warning">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                            <path opacity="0.3" d="M21.25 18.525L13.05 21.825C12.35 22.125 11.65 22.125 10.95 21.825L2.75 18.525C1.75 18.125 1.75 16.725 2.75 16.325L4.04999 15.825L10.25 18.325C10.85 18.525 11.45 18.625 12.05 18.625C12.65 18.625 13.25 18.525 13.85 18.325L20.05 15.825L21.35 16.325C22.35 16.725 22.35 18.125 21.25 18.525ZM13.05 16.425L21.25 13.125C22.25 12.725 22.25 11.325 21.25 10.925L13.05 7.62502C12.35 7.32502 11.65 7.32502 10.95 7.62502L2.75 10.925C1.75 11.325 1.75 12.725 2.75 13.125L10.95 16.425C11.65 16.725 12.45 16.725 13.05 16.425Z" fill="black"></path>
                                                            <path d="M11.05 11.025L2.84998 7.725C1.84998 7.325 1.84998 5.925 2.84998 5.525L11.05 2.225C11.75 1.925 12.45 1.925 13.15 2.225L21.35 5.525C22.35 5.925 22.35 7.325 21.35 7.725L13.05 11.025C12.45 11.325 11.65 11.325 11.05 11.025Z" fill="black"></path>
                                                        </svg>
                                                    </span>
                                                }
                                                @if (item.TaskStat == "تم التنفيذ")
                                                {
                                                    <span class="svg-icon svg-icon-2x svg-icon-success">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                            <path opacity="0.3" d="M21.25 18.525L13.05 21.825C12.35 22.125 11.65 22.125 10.95 21.825L2.75 18.525C1.75 18.125 1.75 16.725 2.75 16.325L4.04999 15.825L10.25 18.325C10.85 18.525 11.45 18.625 12.05 18.625C12.65 18.625 13.25 18.525 13.85 18.325L20.05 15.825L21.35 16.325C22.35 16.725 22.35 18.125 21.25 18.525ZM13.05 16.425L21.25 13.125C22.25 12.725 22.25 11.325 21.25 10.925L13.05 7.62502C12.35 7.32502 11.65 7.32502 10.95 7.62502L2.75 10.925C1.75 11.325 1.75 12.725 2.75 13.125L10.95 16.425C11.65 16.725 12.45 16.725 13.05 16.425Z" fill="black"></path>
                                                            <path d="M11.05 11.025L2.84998 7.725C1.84998 7.325 1.84998 5.925 2.84998 5.525L11.05 2.225C11.75 1.925 12.45 1.925 13.15 2.225L21.35 5.525C22.35 5.925 22.35 7.325 21.35 7.725L13.05 11.025C12.45 11.325 11.65 11.325 11.05 11.025Z" fill="black"></path>
                                                        </svg>
                                                    </span>
                                                }
                                                @if (item.TaskStat == "خارج الوقت")
                                                {
                                                    <span class="svg-icon svg-icon-2x svg-icon-danger">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                                            <path opacity="0.3" d="M21.25 18.525L13.05 21.825C12.35 22.125 11.65 22.125 10.95 21.825L2.75 18.525C1.75 18.125 1.75 16.725 2.75 16.325L4.04999 15.825L10.25 18.325C10.85 18.525 11.45 18.625 12.05 18.625C12.65 18.625 13.25 18.525 13.85 18.325L20.05 15.825L21.35 16.325C22.35 16.725 22.35 18.125 21.25 18.525ZM13.05 16.425L21.25 13.125C22.25 12.725 22.25 11.325 21.25 10.925L13.05 7.62502C12.35 7.32502 11.65 7.32502 10.95 7.62502L2.75 10.925C1.75 11.325 1.75 12.725 2.75 13.125L10.95 16.425C11.65 16.725 12.45 16.725 13.05 16.425Z" fill="black"></path>
                                                            <path d="M11.05 11.025L2.84998 7.725C1.84998 7.325 1.84998 5.925 2.84998 5.525L11.05 2.225C11.75 1.925 12.45 1.925 13.15 2.225L21.35 5.525C22.35 5.925 22.35 7.325 21.35 7.725L13.05 11.025C12.45 11.325 11.65 11.325 11.05 11.025Z" fill="black"></path>
                                                        </svg>
                                                    </span>
                                                }
                                            </span>
                                        </div>
                                        <!--end::Symbol-->
                                        <!--begin::Text-->
                                        <div class="d-flex flex-column">
                                            <span class="text-dark text-hover-primary fs-6 fw-bolder">@Html.DisplayFor(modelItem => item.TaskName)</span>
                                            <span class="sidebar-text-muted fw-bold"> @Html.DisplayFor(modelItem => item.Teams.emp_main.emp_arnm)</span>
                                        </div>
                                        <!--end::Text-->
                                    </div>
                                    <!--end::Item-->
                                }
                            </div>
                            <!--end::Body-->
                        </div>

                    </div>
                    <!--begin::Body-->

                    <div class="row card-footer">

                        <div class="col-3 timeline-badge text-center">
                            <span class="svg-icon svg-icon-2hx svg-icon-primary">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                    <circle fill="#000000" cx="12" cy="12" r="8" />
                                </svg>
                            </span>
                            <br />
                            <small style="font-size:6pt">جديد</small>
                        </div>
                        <div class="col-3 timeline-badge text-center">
                            <span class="svg-icon svg-icon-2hx svg-icon-success">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                    <circle fill="#000000" cx="12" cy="12" r="8" />
                                </svg>
                            </span><br /> <small style="font-size:6pt">تم التنفيذ</small>
                        </div>
                        <div class="col-3 timeline-badge text-center">
                            <span class="svg-icon svg-icon-2hx svg-icon-warning">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                    <circle fill="#000000" cx="12" cy="12" r="8" />
                                </svg>
                            </span><br /> <small style="font-size:6pt">قيد التنفيذ</small>
                        </div>
                        <div class="col-3 timeline-badge text-center">
                            <span class="svg-icon svg-icon-2hx svg-icon-danger">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                    <circle fill="#000000" cx="12" cy="12" r="8" />
                                </svg>
                            </span><br /> <small style="font-size:6pt">خارج الوقت</small>
                        </div>
                    </div>


                </div>
                <!--end::Tables Widget 9-->
            </div>
        </div>



    </div>
    <!--end::Container-->
</div>
<!--end::Content-->


<script>
      //Success Message
    if (window.performance && window.performance.navigation.type == window.performance.navigation.TYPE_BACK_FORWARD) {
        //alert('hello world');
    }
    else {
               var title = '@TempData["title"]';
               var type = '@TempData["type"]';
               var success = '@TempData["SuccessMsg"]';
            if (success != "" && success !=null) {
                swal(
                    {
                        title: title,
                        text: success,
                        type: type,
                        button: "موافق ",

                        confirmButtonClass: 'btn btn-success',
                        timer: 1500

                    }
                )

            }
            //Success Message

    }



    //*********************************
    function Delete(id, Name) {

        swal({
            title: "Are you sure?",
            text: "Once deleted, you can't recover this record!",
            icon: "warning",
            buttons: ["Cancel", "Yes, delete it !!"],

            //buttons: true,
            dangerMode: true,
        })
            .then((willDelete) => {
                if (willDelete) {

                    $.ajax({
                        url: "/HR/Delete/" + id,
                        type: "POST",
                        contentType: "application/json;charset=UTF-8",
                        dataType: "json",
                        success: function (result) {

                            swal("Poof! Your imaginary record has been deleted!", {
                                icon: "success",
                            });
                            $("#here").load(window.location.href + " #here");

                        },
                        error: function (errormessage) {
                            alert(errormessage.responseText);
                        }
                    });

                }
            });
    }
    //*********************************
</script>




